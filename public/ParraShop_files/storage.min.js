function listener(a){if(a.data&&"MBR_STORAGE"===a.data.type)switch(a.data.command){case"get":a.data.value=storage.get(a.data.key),window.parent.postMessage(a.data,"*");break;case"set":storage.set(a.data.key,a.data.value),window.parent.postMessage(a.data,"*");break;case"remove":storage.remove(a.data.key),window.parent.postMessage(a.data,"*")}}var storage={get:function(a){var b=null;try{var c=localStorage.getItem(a);c&&(b=JSON.parse(c))}catch(d){}return b},set:function(a,b){try{var c=JSON.stringify(b);localStorage.setItem(a,c)}catch(d){}return b},remove:function(a){try{localStorage.removeItem(a)}catch(b){}}};window.addEventListener?window.addEventListener("message",listener,!0):window.attachEvent("onmessage",listener);