app.templates.index.order = {"table":[{"tr":[{"td":[{"style":"width: 22%","field":"name","header":"Статус","belongs_to":"status"},{"cbParams":{"format":"dd.MM.yyyy"},"cbType":"date","style":"width: 22%","field":"created_at","header":"Дата заказа","cb":"(function(d, params){return new Date(d).toString(params.format)})"},{"style":"width: 22%","field":"phone","header":"Телефон"},{"style":"width: 22%","header":"Сумма заказа","func":"(function(t){var e,i,n,o,a,c,s;for(e=0,c=t.order_items(),i=0,n=c.length;n>i;i++)r=c[i],e+=r.price*r.quantity*(1-r.discount/100);for(s=t.virtproducts(),a=0,o=s.length;o>a;a++)r=s[a],e+=parseFloat(r.price);return e.toCurrency()})"},{"header":"Сохранить в \"xlsx\"","btn":"custom","btnClick":"","btnTdClass":"blue","btnClass":"","btnIcon":"icon-print","btnA":"(function(rec){\n    if (me.prefix) {\n        prefix = ' ' + me.prefix\n    } else {\n        prefix = ''\n    }\n    number = rec.number || rec.id\n\treturn \"/admin/ordergen/\" + rec.id + \"/Заказ\" + prefix + \" \" + number + \".xlsx\"\n})"},{"btnClass":"edit","btnTdClass":"orange","btn":"edit","header":"Редактировать","btnA":"(function(rec, name){\n\treturn \"/admin/model/\" + name + \"/edit/\" + rec.id\n})"},{"btnClass":"remove","btnTdClass":"red","btn":"remove","header":"Удалить","btnClick":"(function(rec, name){return 'tr = $(this).parents(\"tr\"); models.' + name + '.destroy(' + rec.id + ', {cb: function(){tr.remove()}})'})"}]}]}],"belongs_to":[{"model":"status"}],"has_many":[{"model":"order_item"},{"model":"virtproduct"}]}